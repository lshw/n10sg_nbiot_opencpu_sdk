<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>N10SG OPENCPU MANUAL: FOTA_FUNCTIONS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body><script language="javascript">
        if ((window.name != "content") && (navigator.userAgent.indexOf("Opera") <= -1) )
        document.write("<center><a href='index.html?page=group___f_o_t_a___f_u_n_c_t_i_o_n_s.html'>show framing</a></center>")
        </script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="1_bigpic.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">N10SG OPENCPU MANUAL
   &#160;<span id="projectnumber">V1.2.0</span>
   </div>
   <div id="projectbrief">N10SG OPENCPU SDK API使用说明 AUTHOR:XGL</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">FOTA_FUNCTIONS<div class="ingroups"><a class="el" href="group___f_u_n_c_t_i_o_n_s.html">FUNCTIONS</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>N10SG目前支持基于onenet平台的差分固件升级，平台操作方法请参考OneNET平台发布的FOTA用户使用说明中"提供差分能力的升级系统界面"，部分相关文档请在OneNET平台上获取。 FOTA操作方法请参见FOTA相关手册  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for FOTA_FUNCTIONS:</div>
<div class="dyncontent">
<div class="center"><img src="group___f_o_t_a___f_u_n_c_t_i_o_n_s.png" border="0" usemap="#group______f__o__t__a______f__u__n__c__t__i__o__n__s" alt=""/></div>
<map name="group______f__o__t__a______f__u__n__c__t__i__o__n__s" id="group______f__o__t__a______f__u__n__c__t__i__o__n__s">
<area shape="rect" href="group___f_u_n_c_t_i_o_n_s.html" title="opencpu SDK开放的函数接口" alt="" coords="5,5,100,31"/>
<area shape="rect" title="N10SG目前支持基于onenet平台的差分固件升级，平台操作方法请参考OneNET平台发布的FOTA用户使用说明中&quot;提供差分能力的升级系统界面&quot;，部分相关文档请在OneNET平台上获取。 FOTA操作..." alt="" coords="148,5,284,31"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4405cddce91bb2503714c1e02c7b302a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_o_t_a___f_u_n_c_t_i_o_n_s.html#ga4405cddce91bb2503714c1e02c7b302a">opencpu_fota_try_download</a> (void)</td></tr>
<tr class="memdesc:ga4405cddce91bb2503714c1e02c7b302a"><td class="mdescLeft">&#160;</td><td class="mdescRight">发起升级包下载  <a href="group___f_o_t_a___f_u_n_c_t_i_o_n_s.html#ga4405cddce91bb2503714c1e02c7b302a">More...</a><br /></td></tr>
<tr class="separator:ga4405cddce91bb2503714c1e02c7b302a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga14f36cbc5b6a47fedb93167bf2fa0c6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_o_t_a___f_u_n_c_t_i_o_n_s.html#ga14f36cbc5b6a47fedb93167bf2fa0c6a">opencpu_fota_update</a> (void)</td></tr>
<tr class="memdesc:ga14f36cbc5b6a47fedb93167bf2fa0c6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">触发模组升级  <a href="group___f_o_t_a___f_u_n_c_t_i_o_n_s.html#ga14f36cbc5b6a47fedb93167bf2fa0c6a">More...</a><br /></td></tr>
<tr class="separator:ga14f36cbc5b6a47fedb93167bf2fa0c6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaaca3e40eb5eadc1b630bf0f5563f3ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_o_t_a___f_u_n_c_t_i_o_n_s.html#gaaaca3e40eb5eadc1b630bf0f5563f3ea">opencpu_fota_set_report_param</a> (int first, int period, int count)</td></tr>
<tr class="memdesc:gaaaca3e40eb5eadc1b630bf0f5563f3ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">设置FOTA上报流程的参数，重启生效  <a href="group___f_o_t_a___f_u_n_c_t_i_o_n_s.html#gaaaca3e40eb5eadc1b630bf0f5563f3ea">More...</a><br /></td></tr>
<tr class="separator:gaaaca3e40eb5eadc1b630bf0f5563f3ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad5298f2476823587c2fa944d47f58dc6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_o_t_a___f_u_n_c_t_i_o_n_s.html#gad5298f2476823587c2fa944d47f58dc6">opencpu_fota_get_report_param</a> (int *first, int *period, int *count)</td></tr>
<tr class="memdesc:gad5298f2476823587c2fa944d47f58dc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取当前FOTA上报流程的参数  <a href="group___f_o_t_a___f_u_n_c_t_i_o_n_s.html#gad5298f2476823587c2fa944d47f58dc6">More...</a><br /></td></tr>
<tr class="separator:gad5298f2476823587c2fa944d47f58dc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaed0118795618721a10300895c10ac99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_o_t_a___f_u_n_c_t_i_o_n_s.html#gaaed0118795618721a10300895c10ac99">opencpu_fota_event_cb</a> (int event, int state)</td></tr>
<tr class="memdesc:gaaed0118795618721a10300895c10ac99"><td class="mdescLeft">&#160;</td><td class="mdescRight">FOTA事件回调函数，当有FOTA事件发生时，SDK自动调用此函数返回结果  <a href="group___f_o_t_a___f_u_n_c_t_i_o_n_s.html#gaaed0118795618721a10300895c10ac99">More...</a><br /></td></tr>
<tr class="separator:gaaed0118795618721a10300895c10ac99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadfa06e7b3aad1db80b5599ad274c7ba2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_o_t_a___f_u_n_c_t_i_o_n_s.html#gadfa06e7b3aad1db80b5599ad274c7ba2">opencpu_fota_progress_cb</a> (int current, int total)</td></tr>
<tr class="memdesc:gadfa06e7b3aad1db80b5599ad274c7ba2"><td class="mdescLeft">&#160;</td><td class="mdescRight">FOTA下载进度回调函数  <a href="group___f_o_t_a___f_u_n_c_t_i_o_n_s.html#gadfa06e7b3aad1db80b5599ad274c7ba2">More...</a><br /></td></tr>
<tr class="separator:gadfa06e7b3aad1db80b5599ad274c7ba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad51c2e1e13536d85e87444420a6df42e"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___f_o_t_a___f_u_n_c_t_i_o_n_s.html#gad51c2e1e13536d85e87444420a6df42e">opencpu_fota_version_cb</a> (void)</td></tr>
<tr class="memdesc:gad51c2e1e13536d85e87444420a6df42e"><td class="mdescLeft">&#160;</td><td class="mdescRight">用户自定义程序版本号  <a href="group___f_o_t_a___f_u_n_c_t_i_o_n_s.html#gad51c2e1e13536d85e87444420a6df42e">More...</a><br /></td></tr>
<tr class="separator:gad51c2e1e13536d85e87444420a6df42e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>N10SG目前支持基于onenet平台的差分固件升级，平台操作方法请参考OneNET平台发布的FOTA用户使用说明中"提供差分能力的升级系统界面"，部分相关文档请在OneNET平台上获取。 FOTA操作方法请参见FOTA相关手册 </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaaed0118795618721a10300895c10ac99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaed0118795618721a10300895c10ac99">&#9670;&nbsp;</a></span>opencpu_fota_event_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void opencpu_fota_event_cb </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FOTA事件回调函数，当有FOTA事件发生时，SDK自动调用此函数返回结果 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td>事件主类型 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>事件子类型 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>空</dd></dl>
<p>该函数在SDK中调用，实现在5311_opencpu.c中，不可删除，用户可自行改写内容 </p>

</div>
</div>
<a id="gad5298f2476823587c2fa944d47f58dc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad5298f2476823587c2fa944d47f58dc6">&#9670;&nbsp;</a></span>opencpu_fota_get_report_param()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void opencpu_fota_get_report_param </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取当前FOTA上报流程的参数 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">first</td><td>开机后第一次上报的起始时间，单位s </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">period</td><td>第一次上报失败的情况下，重试的间隔周期，单位s </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>上报失败的情况下，最多重试多少次，单位次 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>空</dd></dl>
<p>More details </p>

</div>
</div>
<a id="gadfa06e7b3aad1db80b5599ad274c7ba2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadfa06e7b3aad1db80b5599ad274c7ba2">&#9670;&nbsp;</a></span>opencpu_fota_progress_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void opencpu_fota_progress_cb </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>total</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FOTA下载进度回调函数 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">current</td><td>当前下载的字节数 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">total</td><td>差分包的总字节数 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>空</dd></dl>
<p>该函数在SDK中调用，实现在5311_opencpu.c中，不可删除，用户可自行改写内容 </p>

</div>
</div>
<a id="gaaaca3e40eb5eadc1b630bf0f5563f3ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaaca3e40eb5eadc1b630bf0f5563f3ea">&#9670;&nbsp;</a></span>opencpu_fota_set_report_param()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int opencpu_fota_set_report_param </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>设置FOTA上报流程的参数，重启生效 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">first</td><td>开机后第一次上报的起始时间，默认40，最小10，单位s </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">period</td><td>第一次上报失败的情况下，重试的间隔周期，默认120，最小120，单位s </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>上报失败的情况下，最多重试多少次，默认10，最小1，单位次 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return 0：设置成功 -1：设置失败</dd></dl>
<p>More details </p>

</div>
</div>
<a id="ga4405cddce91bb2503714c1e02c7b302a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4405cddce91bb2503714c1e02c7b302a">&#9670;&nbsp;</a></span>opencpu_fota_try_download()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void opencpu_fota_try_download </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>发起升级包下载 </p>
<dl class="section return"><dt>Returns</dt><dd>空</dd></dl>
<p>尝试从平台上查询升级包并下载 </p>

</div>
</div>
<a id="ga14f36cbc5b6a47fedb93167bf2fa0c6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga14f36cbc5b6a47fedb93167bf2fa0c6a">&#9670;&nbsp;</a></span>opencpu_fota_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void opencpu_fota_update </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>触发模组升级 </p>
<dl class="section return"><dt>Returns</dt><dd>空</dd></dl>
<p>下载完成后，即可触发升级，升级会自动关闭所有应用程序，进入升级流程，升级完成后自动重启 </p>

</div>
</div>
<a id="gad51c2e1e13536d85e87444420a6df42e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad51c2e1e13536d85e87444420a6df42e">&#9670;&nbsp;</a></span>opencpu_fota_version_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long opencpu_fota_version_cb </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>用户自定义程序版本号 </p>
<dl class="section return"><dt>Returns</dt><dd>版本号的字符串指针</dd></dl>
<p>More details </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
